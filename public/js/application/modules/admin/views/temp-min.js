Ext.onReady(function(){var a=new Ext.form.FormPanel({id:"login-form",title:"Please Login",height:340,defaults:{allowBlank:false,width:280,msgTarget:"side",labelStyle:"font-weight:bold",style:{marginBottom:"20px"}},defaultType:"textfield",items:[{xtype:"box",id:"image",autoEl:{html:'<img src="/images/login.jpg"/>'}},{fieldLabel:"User Name",id:"userName",name:"userName",emptyText:"User Name",blankText:"Enter Username"},{fieldLabel:"Password",id:"password",name:"password",inputType:"password",}],buttons:[{text:"Login",id:"login",scale:"medium",iconCls:"loginbutton",handler:function(){if(a.form.isValid()){a.getEl().mask();a.getForm().submit({url:"/auth/login/",waitMsg:"Authenticating...",success:function(c,d){a.getEl().unmask();Ext.get("userName").ghost("b",{easing:"easeOut",duration:1,remove:false,useDisplay:false});Ext.get("password").ghost("b",{easing:"easeOut",duration:1,remove:false,useDisplay:false});Ext.get("image").ghost("b",{easing:"easeOut",duration:1,remove:false,useDisplay:false});Ext.get("login-form").ghost("b",{easing:"easeOut",duration:1.5,remove:false,useDisplay:false});Ext.get("login-form").pause(3);window.location="/home"},failure:function(c,d){Ext.get("userName").frame("ff0000",3,{duration:1});Ext.get("password").frame("ff0000",3,{duration:1});b("Invalid UserName or Pasword !!");a.getEl().unmask()}})}}},{text:"Reset",scale:"medium",handler:function(){a.form.reset()}}],layoutConfig:{labelSeparator:""},border:true,width:500,labelWidth:140,labelAlign:"right",buttonAlign:"center",});a.render("login-div");function b(c){new Ext.ux.window.MessageWindow({title:"Authentication Failure !!!",html:c||"No information available",origin:{offY:-210,offX:-150},autoHeight:true,width:200,help:false,hideFx:{delay:1000,mode:"standard"},listeners:{render:function(){}}}).show(Ext.getDoc())}});Ext.ns("Ext.ux.window");Ext.ux.window.MessageWindowGroup=function(a){a=a||{};var b=new Ext.WindowGroup();b.positions=[];Ext.apply(b,a);return b};Ext.ux.window.MessageWindowMgr=Ext.ux.window.MessageWindowGroup();Ext.ux.window.MessageWindow=Ext.extend(Ext.Window,{hideAction:"close",autoHide:true,autoHeight:false,bodyStyle:"text-align:left;padding:10px;",buttonAlign:"center",cls:"x-notification",constrain:true,constrainHeader:true,draggable:true,floating:true,frame:true,handleHelp:Ext.emptyFn,help:true,hideFx:{delay:5000},hoverCls:"msg-over",iconCls:"x-icon-information",minHeight:40,minWidth:200,msgs:[],monitorResize:true,pinOnClick:true,pinState:"unpin",plain:false,resizable:false,textHelp:"Get help",textPin:"Pin this to prevent closing",textUnpin:"Unpin this to close",initHidden:true,initComponent:function(){Ext.apply(this,{collapsible:false,footer:false,minHeight:20,stateful:false});if(this.interval){this.startAutoRefresh()}if(this.autoHide){if(this.pinState==="unpin"){this.task=new Ext.util.DelayedTask(this[this.hideAction],this,[this.animateTarget])}}else{this.closable=true}Ext.ux.window.MessageWindow.superclass.initComponent.call(this);this.on({mouseout:{scope:this,fn:this.onMouseout}});this.addEvents("afterpin","afterunpin","click");this.initFx()},initEvents:function(){this.manager=this.manager||Ext.ux.window.MessageWindowMgr;Ext.ux.window.MessageWindow.superclass.initEvents.call(this)},focus:function(){Ext.ux.window.MessageWindow.superclass.focus.call(this)},toFront:function(){if(this.manager.bringToFront(this)){if(this.focusOnShow){this.focus()}}return this},initTools:function(){if(this.pinOnClick){this.addTool({id:"unpin",handler:this.handlePin,hidden:(!this.pinState||this.pinState==="pin"),qtip:this.textPin,scope:this});this.addTool({id:"pin",handler:this.handleUnpin,hidden:(!this.pinState||this.pinState==="unpin"),qtip:this.textUnpin,scope:this})}if(this.help){this.addTool({id:"help",handler:this.handleHelp,qtip:this.textHelp,scope:this})}Ext.ux.window.MessageWindow.superclass.initTools.apply(this,arguments)},onRender:function(b,a){Ext.ux.window.MessageWindow.superclass.onRender.call(this,b,a);if(this.clip){switch(this.clip){case"bottom":Ext.destroy(this.getEl().child("."+this.baseCls+"-bl"));break}}if(true){this.el.addClassOnOver(this.hoverCls)}Ext.fly(this.body.dom).on("click",this.handleClick,this)},close:function(a){if(this.fireEvent("beforeclose",this)!==false){this.hide(a,function(){this.fireEvent("close",this);this.destroy()},this)}},togglePinState:function(a){if(this.pinOnClick){if(this.tools.unpin.isVisible()){this.handlePin(a,this.tools.unpin,this)}else{this.handleUnpin(a,this.tools.pin,this)}}},createElement:function(a,b){if(this.shiftHeader){switch(a){case"header":return;case"tbar":Ext.ux.window.MessageWindow.superclass.createElement.call(this,"header",b);Ext.ux.window.MessageWindow.superclass.createElement.call(this,a,b);return}}Ext.ux.window.MessageWindow.superclass.createElement.call(this,a,b)},focus:Ext.emptyFn,getState:function(){return Ext.apply(Ext.ux.window.MessageWindow.superclass.getState.call(this)||{},this.getBox())},handleClick:function(a){this.fireEvent("click",this,this.msg);this.togglePinState(a)},handlePin:function(c,b,a){b.hide();this.tools.pin.show();this.cancelHiding();this.fireEvent("afterpin",this)},handleUnpin:function(c,b,a){b.hide();this.tools.unpin.show();this[this.hideAction](this.animateTarget);this.fireEvent("afterunpin",this)},cancelHiding:function(){this.addClass("fixed");if(this.autoHide){if(this.pinState==="unpin"){this.task.cancel()}}if(this.tools.pin){this.tools.pin.show()}if(this.tools.unpin){this.tools.unpin.hide()}},initFx:function(){this.showFx=this.showFx||{};Ext.applyIf(this.showFx,{align:"b",duration:1,callback:this.afterShow,scope:this});this.hideFx=this.hideFx||{};Ext.applyIf(this.hideFx,{block:false,callback:this.afterHide,easing:"easeOut",remove:true,scope:this});this.origin=this.origin||{};Ext.applyIf(this.origin,{el:Ext.getDoc(),increment:true,pos:"br-br",offX:-20,offY:-20,spaY:5})},getAnimEl:function(b){var c;if(b.useProxy){c=this.proxy;this.proxy.setOpacity(0.5);this.proxy.show();var a=this.getBox(false);this.proxy.setBox(a);this.el.hide()}else{c=this.el}return c},animHide:function(){this.manager.positions.remove(this.pos);var b=this.hideFx,a=this.getAnimEl(b);switch(b.mode){case"none":break;case"slideIn":a[b.mode]("b",b);break;case"custom":Ext.callback(b.callback,b.scope,[this,a,b]);break;case"standard":b.duration=b.duration||0.25;b.opacity=0;a.shift(b);break;default:b.duration=b.duration||1;a.ghost("b",b);break}},afterShow:function(){Ext.ux.window.MessageWindow.superclass.afterShow.call(this);this.on("move",function(){this.manager.positions.remove(this.pos);this.cancelHiding()},this);if(this.autoHide){if(this.pinState==="unpin"){this.task.delay(this.hideFx.delay)}}},animShow:function(){if(this.el.isVisible()&&this.el.hasClass(this.hoverCls)){return}if(this.msgs.length>1){this.updateMsg()}var b=this.showFx,a=this.el;this.position(a);a.slideIn(b.align,b)},position:function(b){var c,a=(this.showFx.align.substr(0,1)=="t")?1:-1;this.pos=0;if(this.origin.increment){while(this.manager.positions.indexOf(this.pos)>-1){this.pos++}this.manager.positions.push(this.pos)}this.setSize(this.width||this.minWidth,this.height||this.minHeight);if(this.origin.increment){c=this.origin.offY+((this.getSize().height+this.origin.spaY)*this.pos*a)}else{c=0}b.alignTo(this.origin.el,this.origin.pos,[this.origin.offX,c])},onMouseout:function(){},positionPanel:function(b,a,d){if(a&&typeof a[1]=="number"){d=a[1];a=a[0]}b.pageX=a;b.pageY=d;if(a===undefined||d===undefined){return}if(d<0){d=10}var c=b.translatePoints(a,d);b.setLocation(c.left,c.top);return b},setMessage:function(a){this.body.update(a)},setTitle:function(b,a){Ext.ux.window.MessageWindow.superclass.setTitle.call(this,b,a||this.iconCls)},startAutoRefresh:function(a){if(a){this.updateMsg(true)}if(this.autoRefreshProcId){clearInterval(this.autoRefreshProcId)}this.autoRefreshProcId=setInterval(this.animShow.createDelegate(this,[]),this.interval)},stopAutoRefresh:function(){if(this.autoRefreshProcId){clearInterval(this.autoRefreshProcId)}},updateMsg:function(a){if(this.el&&!this.el.hasClass(this.hoverCls)){if(a){}else{this.msgIndex=this.msgs[this.msgIndex+1]?this.msgIndex+1:0;this.msg=this.msgs[this.msgIndex]}this.body.update(this.msg.text)}else{}}});Ext.reg("message-window",Ext.ux.window.MessageWindow);function bingoFormCall(){var a=new Ext.form.FormPanel({title:"Bingo Form",frame:true,bodyStyle:"padding:10px 10px 10px",width:700,renderTo:Ext.getBody(),defaultType:"textfield",defaults:{width:300,},items:[{fieldLabel:"Game Name",name:"gameName",allowBlank:false,blankText:"Please Enter the Game Name",},{fieldLabel:"Description",name:"description",allowBlank:true,xtype:"textarea",height:50},{fieldLabel:"Game Flavor",name:"gameFlavor",xtype:"Extended.Dropbox",width:200,emptyText:"Select Game Flavor....",blankText:"Please Chose Game Flavor",values:[["RU_US","ru_us"],["RU_EU","ru_eu"],["Keno","keno"],["ThreeRFiveL","threerfivel"],["FiveRNineL","fiverninel"],["WOF","wof"]]},{fieldLabel:"Game Type",name:"gameType",xtype:"Extended.Dropbox",width:200,emptyText:"Select Game Type....",blankText:"Please Chose Game Type",values:[["Variable","variable"],["Fixed","fixed"]]},{fieldLabel:"Amount Type",name:"amountType",xtype:"radiogroup",width:270,allowBlank:false,items:[{boxLabel:"Real",name:"at",inputValue:"real"},{boxLabel:"Bonus",name:"at",inputValue:"bonus"},{boxLabel:"Both",name:"at",inputValue:"both"}]},{fieldLabel:"Plot Type",name:"plotType",xtype:"Extended.Dropbox",width:200,emptyText:"Select Plot Type....",blankText:"Please Chose Plot Type",values:[["Separate","separate"],["Combined","combined"]]},{fieldLabel:"Pattern Name",name:"Pattern Name",xtype:"Extended.Dropbox",width:200,emptyText:"Select Pattern Name....",blankText:"Please Chose Pattern Name",values:[["Testing","testing"],]},{fieldLabel:"No. of Parts",name:"NoOfParts",xtype:"numberfield",width:80,allowBlank:false,blankText:"Please Enter No. of Parts",},{xtype:"fieldset",title:"Cards",collapsible:true,width:550,labelPad:30,items:[{fieldLabel:"Price",name:"cardPrice",xtype:"numberfield",width:80,allowBlank:false,blankText:"Please Enter the Card Price",},{fieldLabel:"Minimum",name:"minimumCards",xtype:"numberfield",width:80,allowBlank:false,blankText:"Please Enter the Minimum Cards",},{fieldLabel:"Maximum",name:"maximumCards",xtype:"numberfield",width:80,allowBlank:false,blankText:"Please Enter the Maximum Cards",},]},{fieldLabel:"Free Ratio",name:"freeRatio",xtype:"numberfield",width:80,allowBlank:false,blankText:"Please Enter the Free Ratio",},{fieldLabel:"Buy Time",name:"buyTime",xtype:"numberfield",width:80,allowBlank:false,blankText:"Please Enter the Buy Time",},{fieldLabel:"Call Delay",name:"callDelay",xtype:"numberfield",width:80,allowBlank:false,blankText:"Please Enter the Call Delay",},{fieldLabel:"PNJ",name:"pnjEnable",xtype:"checkboxgroup",width:270,items:[{boxLabel:"Enable",name:"PNJenable"},]},{fieldLabel:"Pre Buy",name:"preBuy",xtype:"checkboxgroup",width:270,items:[{boxLabel:"Enable",name:"preBuyenable"},]},{xtype:"compositefield",fieldLabel:"Return",width:400,combineErrors:false,items:[{xtype:"displayfield",value:"( Real )",},{fieldLabel:"Real Return",name:"realReturn",xtype:"numberfield",width:80,allowBlank:false,blankText:"Please Enter the Real Return",},{xtype:"displayfield",value:"( Bonus  )",},{fieldLabel:"Bonus Return",name:"bonusReturn",xtype:"numberfield",width:80,allowBlank:false,blankText:"Please Enter the Bonus Return",},]},{xtype:"fieldset",title:"Pots",collapsible:true,width:550,labelPad:30,items:[{xtype:"compositefield",fieldLabel:"Real",width:400,combineErrors:false,items:[{xtype:"displayfield",value:"( Maximum )",},{fieldLabel:"Maximum Real Pot",name:"maximumRealPot",xtype:"numberfield",width:80,allowBlank:false,blankText:"Please Enter the Maximum Real Pot",},{xtype:"displayfield",value:"( Minimum  )",},{fieldLabel:"Minimum Real Pot",name:"minimumRealPlot",xtype:"numberfield",width:80,allowBlank:false,blankText:"Please Enter the Minimum Real Pot ",},]},{xtype:"compositefield",fieldLabel:"Bonus",width:400,combineErrors:false,items:[{xtype:"displayfield",value:"( Maximum )",},{fieldLabel:"Maximum Bonus Pot",name:"maximumBonusPot",xtype:"numberfield",width:80,allowBlank:false,blankText:"Please Enter the Maximum Bonus Pot",},{xtype:"displayfield",value:"( Minimum  )",},{fieldLabel:"Minimum Bonus Pot",name:"minimumBonusPlot",xtype:"numberfield",width:80,allowBlank:false,blankText:"Please Enter the Minimum Bonus Pot ",},]},]},],buttons:[{text:"Submit",handler:function(){if(a.form.isValid()){var b="";Ext.iterate(a.form.getValues(),function(c,d){b+=String.format("{0} = {1}<br />",c,d)},this);Ext.Msg.alert("Form Values",b)}}},{text:"Reset",handler:function(){a.form.reset()}}],labelPad:40,labelWidth:140})}com.playdorm.AdminAdminCreatecsr=Ext.extend(Ext.form.FormPanel,{constructor:function(a){console.log(a);a=a||{};com.playdorm.AdminAdminCreatecsr.superclass.constructor.call(this,Ext.applyIf(a,{frame:true,bodyStyle:"padding:10px 10px 10px",defaultType:"textfield",defaults:{width:450},labelPad:40,labelWidth:140,items:[{fieldLabel:"alias",name:"alias",value:"",emptyText:"",blankText:"",id:"id-alias"},{fieldLabel:"passwd",name:"passwd",inputType:"password",emptyText:"",blankText:"",value:""},{fieldLabel:"name",name:"name",value:"",emptyText:"",blankText:"",id:"id-name"}]}))}});Ext.reg("com.playdorm.AdminAdminCreatecsr",com.playdorm.AdminAdminCreatecsr);Ext.state.Manager.setProvider(new Ext.state.CookieProvider());Ext.onReady(function(){var a=new Ext.tree.TreePanel({id:"tree-panel",border:false,autoScroll:true,iconCls:"treeCls",rootVisible:false,useArrows:true,loader:new Ext.tree.TreeLoader({dataUrl:"/menu/jsonmenu"}),root:new Ext.tree.AsyncTreeNode(),plugins:[new Ext.ux.state.TreePanel()]});a.on("click",function(i){if(i.leaf){var d=i.attributes.cxtype;console.log(d);if(d=="com.playdorm.AdminSearchingIndex"){d="com.playdorm.AdminPlayerIndex"}try{var f=Ext.ComponentMgr.types[d];console.log(f);if(!f){console.log(f);Ext.Msg.alert("something wrong !!!");return}var h=Ext.getCmp(d);console.log(h);if(!h){h=new f({id:d});Ext.getCmp("tab-panel").add(h)}Ext.getCmp("tab-panel").activate(h)}catch(g){alert(g.message)}}});var b={id:"content-panel",region:"center",layout:"border",autoScroll:true,frame:true,items:[{id:"tab-panel",region:"center",xtype:"tabpanel",height:500,activeTab:0,frame:true,border:false,items:[welcome]},]};new Ext.Viewport({title:"Home Page",id:"admin-home-index",renderTo:Ext.getBody(),layout:"border",items:[{xtype:"box",region:"north",applyTo:"header",height:70},{id:"tree-menu",region:"west",title:"Menu",autoScroll:true,width:275,collapsible:true,items:[a]},{id:"bottom-panel",region:"south",height:30,html:"Bottom Panel",},b]})});var welcome=new Ext.Panel({id:"admin-home-welcome",title:"Welcome Page",layout:"fit",autoWidth:true,bodyStyle:"padding:25px",frame:true,html:"<div id='admin-home-welcome-div' style='margin-left:100px;'><h2>Welcome!</h2> <p>Text</p></div>"});Ext.ns("com.playdorm");com.playdorm.AdminPlayerIndex=Ext.extend(Ext.Panel,{constructor:function(a){a=a||{};com.playdorm.AdminPlayerIndex.superclass.constructor.call(this,Ext.applyIf(a,{layout:"anchor",frame:true,closable:true,title:"Player Search",autoWidth:true,items:[{xtype:"com.playdorm.PlayerSearchForm",ref:"playerSearchForm",buttons:[{text:"Submit",scale:"medium",width:80,handler:this.onSubmitClick.createDelegate(this)}]},{xtype:"com.playdorm.PlayerSearchGrid",ref:"playerSearchGrid",height:200,anchor:"100%"}],listeners:{afterrender:this.onInit.createDelegate(this)}}))},getStore:function(){console.log("there");console.log(this.playerSearchForm.getForm().getValues());return this.playerSearchGrid.getSearchGridStore()},onInit:function(){var a=this.playerSearchGrid.getBottomToolbar();a.on("beforechange",this.beforePageUpdate,this)},beforePageUpdate:function(a,b){Ext.apply(b,this.playerSearchForm.getForm().getValues())},onSubmitClick:function(){this.getStore().load({params:this.playerSearchForm.getForm().getValues()})}});Ext.reg("com.playdorm.AdminPlayerIndex",com.playdorm.AdminPlayerIndex);Ext.ns("com.playdorm");com.playdorm.PlayerSearchForm=Ext.extend(Ext.form.FormPanel,{constructor:function(a){a=a||{};com.playdorm.PlayerSearchForm.superclass.constructor.call(this,Ext.applyIf(a,{frame:true,bodyStyle:"padding:10px 10px 10px",defaultType:"textfield",defaults:{width:450},labelPad:40,labelWidth:140,items:[{fieldLabel:"Select Field",name:"searchField",xtype:"radiogroup",allowBlank:false,columns:4,items:[{boxLabel:"Login Name",name:"searchField",inputValue:"login",checked:true},{boxLabel:"Player ID",name:"searchField",inputValue:"player_id"},{boxLabel:"Email ID",name:"searchField",inputValue:"email"},{boxLabel:"Password",name:"searchField",inputValue:"password"}]},{fieldLabel:"Enter String",name:"searchString",width:200,blankText:"Please Enter the String"},{fieldLabel:"Match String",name:"match",xtype:"radiogroup",width:270,allowBlank:true,items:[{boxLabel:"Enable",name:"match",inputValue:"1"},{boxLabel:"Disable",name:"match",inputValue:"0",checked:true},]},{fieldLabel:"Account Type",name:"accountType",xtype:"radiogroup",width:350,allowBlank:false,items:[{boxLabel:"Confirmed Accounts",name:"accountType",inputValue:"confirmed",checked:true},{boxLabel:"Unconfirmed Accounts",name:"accountType",inputValue:"unconfirmed"},]},{fieldLabel:"Items Per Page",name:"items",xtype:"com.playdorm.Dropbox",width:70,value:"10",values:[[10,"10"],[20,"20"],[30,"30"]]}]}))}});Ext.reg("com.playdorm.PlayerSearchForm",com.playdorm.PlayerSearchForm);Ext.ns("com.playdorm");com.playdorm.PlayerSearchGrid=Ext.extend(Ext.grid.GridPanel,{constructor:function(a){a=a||{};com.playdorm.PlayerSearchGrid.superclass.constructor.call(this,Ext.applyIf(a,{frame:true,loadMask:true,columns:[{header:"Player Id",dataIndex:"Player Id",renderer:this.renderTopic,width:10,sortable:true,},{header:"User Name",dataIndex:"User Name",width:10,sortable:true},{header:"Email",dataIndex:"Email",width:10,sortable:true},{header:"Type",dataIndex:"Type",width:10,sortable:true,hidden:true},],store:this.getSearchGridStore(),viewConfig:{forceFit:true,enableRowBody:true,showPreview:true},bbar:new Ext.PagingToolbar({pageSize:10,store:this.getSearchGridStore(),displayInfo:true,})}))},getSearchGridStore:function(){if(!this.searchGridStore){this.searchGridStore=new Ext.data.JsonStore({url:"/searching/index/format/json",root:"players",totalProperty:"totalCount",idProperty:"Player Id",fields:["Player Id","User Name","Email","Type"]})}return this.searchGridStore},renderTopic:function(c,d,a){var b=a.data.Type;return String.format("<a href=\"#\" onClick=\"newtab('Player','{0}','/en_GB/player/view/playerId/','{1}')\">{0}</a>",c,a.data.Type)},});Ext.reg("com.playdorm.PlayerSearchGrid",com.playdorm.PlayerSearchGrid);Ext.ns("com.playdorm");com.playdorm.AdminTicketCreate=Ext.extend(Ext.form.FormPanel,{constructor:function(a){a=a||{};com.playdorm.AdminTicketCreate.superclass.constructor.call(this,Ext.applyIf(a,{title:"Ticket Create",frame:true,id:"adminticketcreate",bodyStyle:"padding:10px 10px 10px",width:700,labelPad:40,labelWidth:140,defaultType:"textfield",closable:"true",defaults:{width:300,},items:[{fieldLabel:"Ticket Status",id:"ticketStatus",name:"ticketStatus",xtype:"com.playdorm.Dropbox",emptyText:"Select Ticket Status....",blankText:"Please Chose Ticket Status",value:"Open",values:[["OPEN","Open"],["FORWARDED","Forwarded"]]},{fieldLabel:"User Name",name:"userName",id:"userName",emptyText:"User name ...",allowBlank:false,blankText:"Please Enter the User Name",},{fieldLabel:"Account Id",name:"accountId",id:"accountId",emptyText:"Account Id ...",allowBlank:false,blankText:"Please Enter the User Name",},{fieldLabel:"Subject",name:"subject",id:"subject",emptyText:"Subject ....",allowBlank:false,blankText:"Please Enter the Subject here",},{fieldLabel:"Message",name:"reply_msg",id:"reply_msg",xtype:"textarea",height:130,emptyText:"Enter Your Message here ....",},{fieldLabel:"Note",name:"note",id:"note",xtype:"textarea",height:90,emptyText:"Leave a Note here ....",},],buttons:[{text:"Submit",id:"submit",scale:"medium",width:80,handler:this.onSubmitClick.createDelegate(this)}]}))},onSubmitClick:function(){ticketForm=this;if(ticketForm.form.isValid()){ticketForm.getForm().submit({url:"/ticket/create/format/json",waitTitle:"Ticket Create Data",waitMsg:"Saving ...",success:this.onSuccess(),failure:function(a,b){Ext.Msg.alert("Error In Saving",b.result.msg)}})}},onSuccess:function(){Ext.get("com.playdorm.AdminTicketCreate").fadeOut({endOpacity:1,easing:"easeOut",duration:1,remove:false,useDisplay:true,});var a="com.playdorm.AdminTicketView";var b=Ext.ComponentMgr.types[a];var d=Ext.getCmp(a);if(!d){d=new b({id:a});Ext.getCmp("tab-panel").add(d)}Ext.getCmp("tab-panel").activate(d)},addIt:function(){}});Ext.reg("com.playdorm.AdminTicketCreate",com.playdorm.AdminTicketCreate);Ext.ns("com.playdorm");com.playdorm.AdminTicketReply=Ext.extend(Ext.Panel,{constructor:function(a){a=a||{};com.playdorm.AdminTicketReply.superclass.constructor.call(this,Ext.applyIf(a,{layout:"anchor",frame:true,closable:true,title:"Ticket Reply",autoWidth:true,items:[{xtype:"com.playdorm.TicketReplyGrid",ref:"TicketReplyGrid",autoHeight:true,anchor:"100%"},{xtype:"com.playdorm.TicketReplyForm",ref:"TicketReplyForm",buttons:[{text:"Reply",scale:"medium",width:80,handler:this.onSubmitClick.createDelegate(this)}]},],listeners:{afterrender:this.onInit.createDelegate(this)}}))},getStore:function(){return this.TicketReplyGrid.getGridStore()},onInit:function(){this.getStore().load()},beforePageUpdate:function(a,b){Ext.apply(b)},onSubmitClick:function(){this.getStore().load()}});Ext.reg("com.playdorm.AdminTicketReply",com.playdorm.AdminTicketReply);Ext.ns("com.playdorm");com.playdorm.AdminTicketView=Ext.extend(Ext.Panel,{constructor:function(a){a=a||{};com.playdorm.AdminTicketView.superclass.constructor.call(this,Ext.applyIf(a,{layout:"anchor",frame:"true",closable:"true",title:"Ticket View",autoScroll:true,items:[{xtype:"com.playdorm.TicketViewForm",ref:"TicketViewForm",buttons:[{text:"Submit",scale:"medium",width:80,handler:this.onSubmitClick.createDelegate(this)}]},{xtype:"com.playdorm.TicketViewGrid",ref:"TicketViewGrid",autoHeight:true,anchor:"100%"}],listeners:{afterrender:this.onInit.createDelegate(this),}}))},getStore:function(){return this.TicketViewGrid.getGridStore()},onInit:function(){var a=this.TicketViewGrid.getBottomToolbar();a.on("beforechange",this.beforePageUpdate,this)},beforePageUpdate:function(){Ext.apply(params,this.TicketViewForm.getForm().getValues())},onSubmitClick:function(){this.getStore().load({params:this.TicketViewForm.getForm().getValues()})}});Ext.reg("com.playdorm.AdminTicketView",com.playdorm.AdminTicketView);Ext.ns("com.playdorm");com.playdorm.TicketReplyForm=Ext.extend(Ext.form.FormPanel,{constructor:function(a){a=a||{};com.playdorm.TicketReplyForm.superclass.constructor.call(this,Ext.applyIf(a,{frame:true,bodyStyle:"padding:10px 10px 10px",defaultType:"textfield",defaults:{width:290},labelPad:40,labelWidth:140,items:[{fieldLabel:"Message",name:"reply_msg",xtype:"textarea",height:130,emptyText:"Enter Your Message here ....",},{fieldLabel:"Note",name:"note",xtype:"textarea",height:90,emptyText:"Leave a Note here ....",},{fieldLabel:"Ticket Status",name:"ticketStatus",xtype:"com.playdorm.Dropbox",emptyText:"Select Ticket Status....",blankText:"Please Chose Ticket Status",value:"Open",values:[["OPEN","Open"],["FORWARDED","Forwarded"]]}]}))}});Ext.reg("com.playdorm.TicketReplyForm",com.playdorm.TicketReplyForm);Ext.ns("com.playdorm");com.playdorm.TicketReplyGrid=Ext.extend(Ext.Panel,{constructor:function(a,b){a=a||{};com.playdorm.TicketReplyGrid.superclass.constructor.call(this,Ext.applyIf(a,{border:false,height:200,layout:"fit",autoLoad:{url:"http://www.google.com",renderer:"component",params:{userId:1}}}))}});Ext.reg("com.playdorm.TicketReplyGrid",com.playdorm.TicketReplyGrid);function callTicketReplyForm(a,c,b){console.log(a);var d=a.split("*");console.log(c+"&&"+b);com.playdorm.TicketReplyPopupForm={init:function(){var e=new Array();for(var f=0;f<d.length-1;f++){e[f]=new Array(2);e[f,0]=d[f];e[f,1]=d[f]}var g=new Array(2);for(f=0;f<2;f++){g[f]=new Array(2)}g[0][0]="OPEN";g[0][1]="OPEN";g[1][0]="FORWARDED";g[1][1]="FORWARDED";console.log(e);this.form=new Ext.FormPanel({border:false,url:"ticket/reply/ticket_id/"+c+"/id/"+b+"/ticketType/player/format/json",defaults:{xtype:"textfield"},items:[{fieldLabel:"Message",name:"reply_msg",xtype:"textarea",height:130,width:300,emptyText:"Enter Your Message here ....",},{fieldLabel:"Note",name:"note",xtype:"textarea",height:90,width:300,emptyText:"Leave a Note here ....",},{fieldLabel:"Ticket Status",name:"ticket_status",xtype:"com.playdorm.Dropbox",emptyText:"Select Ticket Status....",blankText:"Please Chose Ticket Status",value:"",values:g},{fieldLabel:"CSR ID",name:"csrId",xtype:"com.playdorm.Dropbox",emptyText:"Select csr Id....",blankText:"Please Chose csr Id",value:"",values:[e]}]});var h=new Ext.Window({title:"Reply to ticket Id - "+c,width:450,height:500,bodyStyle:"background-color:#fff;padding: 10px",items:this.form,buttonAlign:"right",buttons:[{text:"Save",handler:function(){com.playdorm.TicketReplyPopupForm.form.getForm().submit({success:function(j,i){Ext.Msg.alert("Success","ok")},failure:function(j,i){Ext.Msg.alert("Failure",i.result.error)}})}},{text:"Reset",handler:function(){form.getForm().reset()}}]});h.show()}};Ext.onReady(com.playdorm.TicketReplyPopupForm.init,com.playdorm.TicketReplyPopupForm)}Ext.ns("com.playdorm");com.playdorm.TicketViewForm=Ext.extend(Ext.form.FormPanel,{constructor:function(a){a=a||{};com.playdorm.TicketViewForm.superclass.constructor.call(this,Ext.applyIf(a,{frame:true,bodyStyle:"padding:10px 10px 10px",defaultType:"textfield",defaults:{width:290},labelPad:40,labelWidth:140,items:[{fieldLabel:"From",xtype:"compositefield",name:"from",combineErrors:false,items:[{xtype:"displayfield",value:"  Date  : ",},{fieldLabel:"Date",name:"start_date",xtype:"datefield",emptyText:"From Date",value:(new Date()).clearTime(),format:"Y-m-d",},{xtype:"displayfield",value:"  Time  : ",},{fieldLabel:"Time",name:"from_time",xtype:"timefield",emptyText:"From Time",width:100,value:"00:00",minValue:"00:00",maxValue:"23:30",format:"H:i",increment:30,}]},{fieldLabel:"To",name:"to",xtype:"compositefield",combineErrors:false,items:[{xtype:"displayfield",value:"  Date  : ",},{fieldLabel:"Date",name:"end_date",xtype:"datefield",emptyText:"To Date",value:(new Date()).clearTime(),format:"Y-m-d",},{xtype:"displayfield",value:"  Time  : ",},{fieldLabel:"Time",name:"to_time",xtype:"timefield",value:"00:00",minValue:"00:00",maxValue:"23:30",format:"H:i",increment:30,width:100,},]},{fieldLabel:"Ticket Status",name:"ticket_status",xtype:"com.playdorm.Dropbox",width:290,emptyText:"Select Ticket Status....",blankText:"Please Chose Ticket Status",value:"Open",values:[["Open","OPEN"],["Close","CLOSE"],["Pending","PENDING"],["Forwarded","FORWARDED"],["Dispatch","DISPATCH"],]},{fieldLabel:"Items Per Page",name:"items_per_page",xtype:"com.playdorm.Dropbox",width:70,value:"10",values:[[10,"10"],[20,"20"],[30,"30"],[40,"40"],[50,"50"],[60,"60"],[70,"70"],[80,"80"],[90,"90"],[100,"100"],]},]}))}});Ext.reg("com.playdorm.TicketViewForm",com.playdorm.TicketViewForm);Ext.ns("com.playdorm");com.playdorm.TicketViewGrid=Ext.extend(Ext.grid.GridPanel,{constructor:function(a){a=a||{};com.playdorm.TicketViewGrid.superclass.constructor.call(this,Ext.applyIf(a,{frame:true,loadMask:true,columns:[{header:"Ticket Id",dataIndex:"ticket_id",renderer:this.renderTopic,sortable:true},{header:"User Id",dataIndex:"user_id",sortable:true,hidden:true,},{header:"Subject",dataIndex:"subject",sortable:true},{header:"Start Date",dataIndex:"start_date",sortable:true},{header:"Status",dataIndex:"ticket_status",sortable:true},],store:this.getGridStore(),viewConfig:{forceFit:true,enableRowBody:true,showPreview:true},bbar:new Ext.PagingToolbar({pageSize:100,store:this.getGridStore(),displayInfo:true,})}))},getGridStore:function(){if(!this.searchGridStore){this.searchGridStore=new Ext.data.JsonStore({url:"ticket/view/format/json",root:"ticketdetails",totalProperty:"totalCount",idProperty:"ticket_id",fields:["ticket_id","user_id","subject","start_date","ticket_status"]})}return this.searchGridStore},renderTopic:function(b,c,a){console.log(a.data.ticket_id);return String.format('<b><a href="#" onclick="callReplyPanel({0},{1})">{0}</a>',a.data.ticket_id,a.data.user_id)}});Ext.reg("com.playdorm.TicketViewGrid",com.playdorm.TicketViewGrid);Ext.ns("com.playdorm");com.playdorm.AdminAffiliatesearchIndex=Ext.extend(Ext.Panel,{constructor:function(a){a=a||{};com.playdorm.AdminAffiliatesearchIndex.superclass.constructor.call(this,Ext.applyIf(a,{layout:"anchor",frame:true,closable:true,title:"Affiliate Search",autoWidth:true,items:[{xtype:"com.playdorm.AffiliateSearchingForm",ref:"AffiliateSearchForm",buttons:[{text:"Submit",scale:"medium",width:80,formBind:true,handler:this.onSubmitClick.createDelegate(this)}]},{xtype:"com.playdorm.AffiliateSearchingGrid",ref:"AffiliateSearchGrid",autoHeight:true,anchor:"100%"}],listeners:{afterrender:this.onInit.createDelegate(this)}}))},getStore:function(){return this.AffiliateSearchGrid.getSearchGridStore()},onInit:function(){var a=this.AffiliateSearchGrid.getBottomToolbar();a.on("beforechange",this.beforePageUpdate,this)},beforePageUpdate:function(a,b){Ext.apply(b,this.AffiliateSearchForm.getForm().getValues())},onSubmitClick:function(){this.getStore().load({params:this.AffiliateSearchForm.getForm().getValues()})}});Ext.reg("com.playdorm.AdminAffiliatesearchIndex",com.playdorm.AdminAffiliatesearchIndex);Ext.ns("com.playdorm");com.playdorm.AffiliateSearchingForm=Ext.extend(Ext.form.FormPanel,{constructor:function(a){a=a||{};com.playdorm.AffiliateSearchingForm.superclass.constructor.call(this,Ext.applyIf(a,{labelWidth:100,frame:true,bodyStyle:"padding:10px 10px 10px",defaultType:"textfield",defaults:{width:450},items:[{fieldLabel:"Select Field",name:"selectField",xtype:"radiogroup",width:350,allowBlank:false,columns:2,items:[{boxLabel:"Alias",name:"searchField",inputValue:"alias",checked:true},{boxLabel:"Account ID",name:"searchField",inputValue:"accountID"},{boxLabel:"First Name",name:"searchField",inputValue:"firstName"},{boxLabel:"Last Name",name:"searchField",inputValue:"lastName"},{boxLabel:"Email ID",name:"searchField",inputValue:"emailID"},{boxLabel:"Company",name:"searchField",inputValue:"company"},{boxLabel:"Tracker Name",name:"searchField",inputValue:"trackerName"},]},{fieldLabel:"Enter String",name:"searchString",allowBlank:false,blankText:"Please Enter the String",},{fieldLabel:"Match String",name:"match",xtype:"radiogroup",width:270,allowBlank:true,items:[{boxLabel:"Enable",name:"match",inputValue:"1"},{boxLabel:"Disable",name:"match",inputValue:"0",checked:true},]},{fieldLabel:"Sorting Order",name:"order",xtype:"radiogroup",width:350,allowBlank:false,items:[{boxLabel:"Ascending Order",name:"order",inputValue:"ASC",checked:true},{boxLabel:"Descending Order",name:"order",inputValue:"DESC"},]},{fieldLabel:"Items Per Page",name:"items",xtype:"com.playdorm.Dropbox",width:120,emptyText:"Select a value....",blankText:"Please choose a value",value:"10",values:[[10,"10"],[20,"20"],[30,"30"]]},],}))}});Ext.reg("com.playdorm.AffiliateSearchingForm",com.playdorm.AffiliateSearchingForm);Ext.ns("com.playdorm");com.playdorm.AffiliateSearchingGrid=Ext.extend(Ext.grid.GridPanel,{constructor:function(a){a=a||{};com.playdorm.AffiliateSearchingGrid.superclass.constructor.call(this,Ext.applyIf(a,{frame:true,loadMask:true,columns:[{header:"Affiliate Id",dataIndex:"Id",renderer:this.renderTopic,width:10,sortable:true,},{header:"User Name",dataIndex:"Alias",width:10,sortable:true},{header:"Email",dataIndex:"Email",width:10,sortable:true},],store:this.getSearchGridStore(),viewConfig:{forceFit:true,enableRowBody:true,showPreview:true},bbar:new Ext.PagingToolbar({pageSize:10,store:this.getSearchGridStore(),displayInfo:true,})}))},getSearchGridStore:function(){if(!this.searchGridStore){this.searchGridStore=new Ext.data.JsonStore({url:"/affiliatesearch/index/format/json",root:"affiliates",totalProperty:"totalCount",idProperty:"Id",fields:["Id","Alias","Email"]})}return this.searchGridStore},renderTopic:function(b,c,a){return String.format("<a href=\"#\" onClick=\"newtab('Affiliate','{0}','en_GB/affiliatesearch/view/affiliateId/')\">{0}</a>",b)}});Ext.reg("com.playdorm.AffiliateSearchingGrid",com.playdorm.AffiliateSearchingGrid);Ext.ns("com.playdorm");com.playdorm.AdminBonusCreate=Ext.extend(Ext.form.FormPanel,{constructor:function(a){a=a||{};com.playdorm.AdminBonusCreate.superclass.constructor.call(this,Ext.applyIf(a,{title:"Bonus Create",frame:true,bodyStyle:"padding:10px 10px 10px",width:700,labelPad:40,labelWidth:140,defaultType:"textfield",closable:"true",defaults:{width:300,},items:[{fieldLabel:"Name",name:"name",xtype:"textfield",allowBlank:false,},{fieldLabel:"Description",name:"description",xtype:"textarea",height:130,emptyText:"Enter Your Message here ....",allowBlank:true,},{fieldLabel:"No of Levels",name:"noOfParts",xtype:"textfield",allowBlank:false,},],buttons:[{text:"Submit",scale:"medium",width:80,handler:this.onSubmitClick.createDelegate(this)}]}))},onSubmitClick:function(){if(this.form.isValid()){this.getForm().submit({url:"/bonus/create/format/json",success:function(d,e){var a="com.playdorm.AdminBonusProcess";var b=Ext.ComponentMgr.types[a];var f=Ext.getCmp(a);if(!f){f=new b({id:a});Ext.getCmp("tab-panel").add(f)}Ext.getCmp("tab-panel").activate(f);Ext.getCmp("tab-panel").remove("com.playdorm.AdminBonusCreate")},failure:function(a,b){Ext.Msg.alert("error",b.response.responseText)}})}}});Ext.reg("com.playdorm.AdminBonusCreate",com.playdorm.AdminBonusCreate);Ext.ns("com.playdorm");com.playdorm.AdminBonusProcess=Ext.extend(Ext.grid.GridPanel,{constructor:function(b){b=b||{};var c=new Ext.ux.grid.RowEditor({saveText:"Update"});c.on({scope:this,afteredit:function(f,g,e,h){Ext.Ajax.request({url:"/bonus/process/format/json",method:"POST",params:g,success:function(){alert("done")}})}});var d=Ext.data.Record.create([{name:"levelName",type:"string"},{name:"minPoints",type:"string"},{name:"maxPoints",type:"string",},{name:"bonusPercent",type:"string"},{name:"fixedBonus",type:"string"},{name:"minDeposit",type:"string"},{name:"minTotalDeposit",type:"string"},{name:"rewardTimes",type:"string"},{name:"fixedReal",type:"string"}]);var a=new Ext.data.GroupingStore({});com.playdorm.AdminBonusProcess.superclass.constructor.call(this,Ext.applyIf(b,{frame:true,loadMask:true,title:"Bonus Schemes",closable:true,store:a,plugins:[c],view:new Ext.grid.GroupingView({markDirty:false}),tbar:[{text:"Add Bonus Scheme",handler:function(){var f=new d({levelName:""});c.stopEditing();a.insert(0,f);this.getView().refresh();this.getSelectionModel().selectRow(0);c.startEditing(0)}}],columns:[new Ext.grid.RowNumberer(),{id:"levelName",header:"Level Name",dataIndex:"levelName",sortable:true,editor:{xtype:"textfield",allowBlank:false}},{id:"minPoints",header:"Minimum Points",dataIndex:"minPoints",sortable:true,editor:{xtype:"textfield",allowBlank:false}},{id:"maxPoints",header:"Maximum Points",dataIndex:"maxPoints",sortable:true,editor:{xtype:"textfield",allowBlank:false,}},{id:"bonusPercent",header:"Bonus Percent",dataIndex:"bonusPercent",sortable:true,editor:{xtype:"textfield",allowBlank:false,}},{id:"fixedBonus",header:"Fixed Bonus",dataIndex:"fixedBonus",sortable:true,editor:{xtype:"textfield",allowBlank:false,}},{id:"minDeposit",header:"Minimum Deposit",dataIndex:"minDeposit",sortable:true,editor:{xtype:"textfield",allowBlank:false,}},{id:"minTotalDeposit",header:"Minimum Total Deposit",dataIndex:"minTotalDeposit",sortable:true,editor:{xtype:"textfield",allowBlank:false,}},{id:"rewardTimes",header:"Reward Times",dataIndex:"rewardTimes",sortable:true,editor:{xtype:"textfield",allowBlank:false,}},{id:"fixedReal",header:"Fixed Real",dataIndex:"fixedReal",sortable:true,editor:{xtype:"textfield",allowBlank:false,}},]}))},});Ext.reg("com.playdorm.AdminBonusProcess",com.playdorm.AdminBonusProcess);